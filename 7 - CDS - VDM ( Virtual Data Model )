ğŸ›ï¸ VDM â€“ Virtual Data Model
(ğŸ“Œ SAPâ€™nin CDS iÃ§in Ã¶nerdiÄŸi katmanlÄ± model yapÄ±sÄ±)


ğŸ¯ Neden VDM?
CDS viewâ€™leri geliÅŸtirirken rastgele deÄŸil, belli bir katmanlÄ± yapÄ± iÃ§inde oluÅŸturmak SAPâ€™nin Ã¶nerdiÄŸi mimari yaklaÅŸÄ±mdÄ±r.
Bu yapÄ±ya VDM (Virtual Data Model) denir.
	AmaÃ§: yeniden kullanÄ±labilir, okunabilir, bakÄ±mÄ± kolay ve standartlara uygun CDS viewâ€™ler Ã¼retmek.


ğŸ§  VDMâ€™in 3 KatmanÄ±
SAP VDMâ€™i 3 temel CDS katmanÄ±na ayÄ±rÄ±r:


ğŸ”¹ 1. Basic View (Temel Katman)
Ã–zellikler
DoÄŸrudan veritabanÄ± tablolarÄ±na baÄŸlanÄ±r (SFLIGHT, VBAK vs.)
Minimum iÅŸ mantÄ±ÄŸÄ± iÃ§erir
Field-level tanÄ±mlamalar yapÄ±lÄ±r
Association tanÄ±mlanabilir

ğŸ“Œ Annotation:
@VDM.viewType: #BASIC


ğŸ”¹ 2. Composite View (Orta Katman)
Ã–zellikler
1 veya daha fazla basic viewâ€™i birleÅŸtirir
JOIN, ASSOCIATION, hesaplamalar yapÄ±lÄ±r
KarmaÅŸÄ±k veri iliÅŸkileri burada tanÄ±mlanÄ±r
Ä°ÅŸ mantÄ±ÄŸÄ± bu katmanda yer alÄ±r

ğŸ“Œ Annotation:
@VDM.viewType: #COMPOSITE


ğŸ”¹ 3. Consumption View (Sunum KatmanÄ±)
Ã–zellikler
Fiori, OData, UI gibi dÄ±ÅŸ sistemlerin kullandÄ±ÄŸÄ± son view
@OData.publish, @UI.* gibi annotationâ€™lar burada kullanÄ±lÄ±r
Sadece gÃ¶sterilecek alanlarÄ± iÃ§erir

ğŸ“Œ Annotation:
@VDM.viewType: #CONSUMPTION


ğŸ§© Ã–rnek: SatÄ±ÅŸ Belgeleri CDS Zinciri
1ï¸âƒ£ Basic View (VBAK)

@AbapCatalog.sqlViewName: 'ZVBAS'
@VDM.viewType: #BASIC
define view ZBASIC_SALES_HEADER as select from vbak {
  vbeln,
  erdat,
  kunnr,
  vkorg
}


2ï¸âƒ£ Composite View (Join ile mÃ¼ÅŸteri verisi de alÄ±nÄ±r)

@AbapCatalog.sqlViewName: 'ZVCOMP_SALES'
@VDM.viewType: #COMPOSITE
define view ZCOMP_SALES as select from ZBASIC_SALES_HEADER as header
  association [0..1] to kna1 as _customer on header.kunnr = _customer.kunnr
{
  key header.vbeln,
  header.erdat,
  header.vkorg,
  _customer.name1 as customer_name
}


3ï¸âƒ£ Consumption View (UI iÃ§in)

@AbapCatalog.sqlViewName: 'ZVCONS_SALES'
@VDM.viewType: #CONSUMPTION
@AccessControl.authorizationCheck: #NOT_REQUIRED
@OData.publish: true
define view ZCONSUME_SALES as select from ZCOMP_SALES {
  key vbeln,
  erdat,
  vkorg,
  customer_name
}

ArtÄ±k bu view OData servisine, Fiori ekranÄ±na ya da analiz ekranÄ±na baÄŸlanabilir.


ğŸ“ VDMâ€™in FaydalarÄ±
FaydasÄ±	AÃ§Ä±klama
AyrÄ± gÃ¶revler net ayrÄ±lÄ±r	Veri Ã§ekme â€“ iÅŸleme â€“ gÃ¶sterme ayrÄ± viewâ€™lerde
Tekrar kullanÄ±labilirlik	Basic ve composite viewâ€™ler farklÄ± yerlerde kullanÄ±labilir
Standardizasyon	SAPâ€™nin hazÄ±r CDS viewâ€™leri de bu yapÄ±ya uyar
BakÄ±m kolaylÄ±ÄŸÄ±	Hangi katmanda hangi iÅŸ var hemen anlaÅŸÄ±lÄ±r


ğŸ“Œ SAP'nin Kendi CDS Viewâ€™leri de VDM yapÄ±sÄ±na uyar!
EÄŸer bir S/4HANA sistemin varsa, SAPâ€™nin kendi viewâ€™lerinde genelde ÅŸÃ¶yle isimler gÃ¶rÃ¼rsÃ¼n:
	â€¢ I_... â†’ Interface view (genelde Basic)
	â€¢ C_... â†’ Consumption view
	â€¢ P_... â†’ Parameterized view

