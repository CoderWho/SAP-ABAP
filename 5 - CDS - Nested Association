ğŸ” Nested Association (ğŸ“Œ â€œÄ°liÅŸkili Tablolar Ä°Ã§inde Ä°liÅŸkilerâ€)


ğŸ¯ Bu Konu Neden Ã–nemli?
Åimdiye kadar Ã¶ÄŸrendiÄŸimiz ASSOCIATION, bir viewâ€™in baÅŸka bir tabloya veya viewâ€™e baÄŸlanmasÄ±nÄ± saÄŸlÄ±yordu.
Ama gerÃ§ek hayatta, Ã§oÄŸu zaman iliÅŸkiler tek katmanlÄ± deÄŸildir:
	â€¢ UÃ§uÅŸ â†’ Havayolu
	â€¢ UÃ§uÅŸ â†’ UÃ§uÅŸ PlanÄ± â†’ KalkÄ±ÅŸ Åehri
	â€¢ SipariÅŸ â†’ MÃ¼ÅŸteri â†’ Ãœlke
	â€¢ Fatura â†’ Malzeme â†’ Malzeme Grubu
Yani:
	Bir tablo bir baÅŸkasÄ±yla, o da baÅŸka bir tabloyla baÄŸlÄ±dÄ±r.


ğŸ§  MantÄ±ÄŸÄ±
	CDSâ€™te bir association iÃ§inde, baÅŸka bir association tanÄ±mlayabiliriz.
	Buna â€œnested associationâ€ denir.
Bu sayede birden fazla seviyede iliÅŸkiyi tek bir CDS View iÃ§inde tanÄ±mlayabilir ve gerektiÄŸinde UI, OData veya baÅŸka viewâ€™lerde bu zinciri izleyebiliriz.



ğŸ§© Basit Senaryo: UÃ§uÅŸ â†’ UÃ§uÅŸ PlanÄ± â†’ KalkÄ±ÅŸ Åehri
Tablo Ä°liÅŸkileri:
	â€¢ SFLIGHT â†’ SPFLI Ã¼zerinden baÄŸlantÄ±: CARRID + CONNID
	â€¢ SPFLI â†’ SCITY gibi bir ÅŸehir tablosuna baÄŸlanabilir


ğŸ”§ Ã–rnek: Nested Association ile CDS :

@AbapCatalog.sqlViewName: 'ZCDS_NESTED_FLIGHT'
@AccessControl.authorizationCheck: #NOT_REQUIRED
define view ZC_FLIGHT_NESTED as select from sflight as f
  association [0..1] to spfli as _flight_plan
    on f.carrid = _flight_plan.carrid and
       f.connid = _flight_plan.connid

{
  key f.carrid,
  key f.connid,
  f.fldate,

  -- 1. seviye iliÅŸki: uÃ§uÅŸ planÄ±
  _flight_plan.cityfrom,

  -- 2. seviye nested iliÅŸki: kalkÄ±ÅŸ ÅŸehri detaylarÄ±
  _flight_plan._cityfrom.name as departure_city_name
}


Burada:
	â€¢ _flight_plan: SFLIGHT â†’ SPFLI iliÅŸkisi
	â€¢ _flight_plan._cityfrom: SPFLI view'inin iÃ§inde tanÄ±mlÄ± baÅŸka bir association (ÅŸehir detaylarÄ±na)
	â€¢ Bu zincir sayesinde tek CDS view iÃ§inde birÃ§ok katmanlÄ± bilgiye ulaÅŸabiliyoruz.

ğŸªœ Association Zinciri

SFLIGHT
  â””â”€â”€ _flight_plan (SPFLI)
         â””â”€â”€ _cityfrom (CITY)

UI5 veya Fiori Elements gibi teknolojiler bu nested associationâ€™larÄ± otomatik olarak tanÄ±r ve baÄŸlar.

âœ… AvantajlarÄ±
Ã–zellik	AÃ§Ä±klama
Ã‡ok katmanlÄ± veri modeli	GerÃ§ek hayattaki veri iliÅŸkilerine bire bir uyar
Daha az JOIN, daha Ã§ok anlam	Viewâ€™ler birbirine baÄŸlÄ± ama esnek
Tek sorguda Ã§ok bilgiye ulaÅŸma	UÃ§uÅŸ â†’ Plan â†’ Åehir gibi zincirler Ã§ok kolay hale gelir


âš ï¸ Dikkat Edilecek Noktalar
Nokta	AÃ§Ä±klama
Her iliÅŸki â€œoptionalâ€ olmalÄ±	[0..1] ya da [1..1] ÅŸeklinde tanÄ±mlanmalÄ±
Performans kontrolÃ¼ ÅŸart	Ã‡ok derin nested iliÅŸkiler bazen performansÄ± etkileyebilir
Fiori Elementsâ€™te dikkatli kullanÄ±lmalÄ±	TÃ¼m iliÅŸkiler UIâ€™a yansÄ±yabilir, sade kalmaya Ã§alÄ±ÅŸ


ğŸ§ª Ã–neri
Bir test sistemi olduÄŸunda, kendi uÃ§uÅŸ veritabanÄ±nÄ± baz alarak:
	â€¢ SFLIGHT â†’ SPFLI â†’ SCARR â†’ T005T gibi Ã¶rneklerle nested yapÄ± oluÅŸturabiliriz.
	â€¢ UIâ€™daki sonucu gÃ¶rmek de Ã§ok Ã¶ÄŸretici olur.

