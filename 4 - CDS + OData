ğŸŒ CDS + OData
(ğŸ“Œ CDS Viewâ€™i OData Servisine DÃ¶nÃ¼ÅŸtÃ¼rme)


ğŸ¯ Neden Bunu YapÄ±yoruz?
CDS View ile verimizi modelledik, filtreledik, yetkilendirdik.
Åimdi bu veriyi:
	â€¢ Bir Fiori uygulamasÄ±na
	â€¢ Bir mobil appâ€™e
	â€¢ Veya harici bir servise
aktarabilir hale getirmemiz gerekiyor.
	Ä°ÅŸte OData, SAPâ€™nin bu veri aktarÄ±mÄ± iÃ§in kullandÄ±ÄŸÄ± web servisi mimarisidir.


ğŸ§  Temel MantÄ±k
	CDS Viewâ€™e kÃ¼Ã§Ã¼k bir @OData.publish: true annotationâ€™Ä± eklersin.
	SAP, senin yerine tÃ¼m OData servis altyapÄ±sÄ±nÄ± otomatik kurar.

âš™ï¸ 3 AdÄ±mda CDS â†’ OData Servisi

âœ… 1. CDS View'i TanÄ±mla

@AbapCatalog.sqlViewName: 'ZCDS_FLIGHT_OD'
@AccessControl.authorizationCheck: #NOT_REQUIRED
@OData.publish: true
define view ZC_FLIGHT_ODATA as select from sflight
{
  carrid,
  connid,
  fldate,
  price,
  currency
}


ğŸ”¹ Ã–nemli olan satÄ±r:
@OData.publish: true

Bu satÄ±r sayesinde sistem, bir OData servis entity'si oluÅŸturur.



âœ… 2. Servisi YayÄ±na Al (T-Code: /IWFND/MAINT_SERVICE)
	1. SEGW'ye gitmene gerek yok!
	2. /IWFND/MAINT_SERVICE ekranÄ±na gir
	3. SaÄŸ Ã¼stte â€œAdd Serviceâ€ de:
		â—‹ System Alias: (default_local olabilir)
		â—‹ Technical Service Name: ZC_FLIGHT_ODATA_CDS
	4. â€œAdd Selected Servicesâ€ ile servisi aktif et
	ArtÄ±k bu servisin URLâ€™i hazÄ±r:

Swift:
/sap/opu/odata/sap/ZC_FLIGHT_ODATA_CDS/

âœ… 3. Test Et
Web tarayÄ±cÄ±nda aÃ§:

Swift: 
/sap/opu/odata/sap/ZC_FLIGHT_ODATA_CDS/$metadata


â€¢ Bu URL, servisin yapÄ±sÄ±nÄ± XML olarak gÃ¶sterir (alanlar, tipler, vs.)
â€¢ Veriyi gÃ¶rmek iÃ§in:


Swift:
/sap/opu/odata/sap/ZC_FLIGHT_ODATA_CDS/ZC_FLIGHT_ODATA

JSON veya XML formatÄ±nda tÃ¼m uÃ§uÅŸ bilgileri gelir.



ğŸ”§ Ek Ã–zellik: Annotation ile UI KontrolÃ¼


@UI.lineItem: [ { position: 10 } ]
carrid,

@UI.lineItem: [ { position: 20 } ]
connid,

@UI.hidden: true
currency


OData Ã¼zerinden bu servis bir Fiori Elements uygulamasÄ±na baÄŸlandÄ±ÄŸÄ±nda:
â€¢ Hangi alanÄ±n listede gÃ¶sterileceÄŸi
â€¢ Hangi alanÄ±n gizli kalacaÄŸÄ± belirlenmiÅŸ olur


âœ… AvantajlarÄ±
Ã–zellik	AÃ§Ä±klama
Kod yazmadan servis Ã¼retimi	SEGWâ€™ye gerek yok
HÄ±zlÄ± Fiori geliÅŸtirme	UI5 + CDS Ã§ok kolay
UI aÃ§Ä±klamalarÄ± CDSâ€™te	Tek kaynaktan modelleme


âš ï¸ Dikkat Edilecekler
UyarÄ±	AÃ§Ä±klama
CDS View adÄ± ile servis adÄ± farklÄ±	CDS: ZC_FLIGHT_ODATA â†’ Servis: ZC_FLIGHT_ODATA_CDS
DeÄŸiÅŸiklikten sonra servisi â€œre-registerâ€ gerekebilir	Ã–zellikle yeni alan eklersen
OData cacheâ€™i temizle	/IWFND/CACHE_CLEANUP T-Code iÅŸe yarar


ğŸ§ª Bonus: Fiori Elements ile Entegrasyon
SAP GUI â†’ Fiori App Reference Library â†’ Template: List Report Page
	â€¢ CDSâ€™in Ã¼zerine sÄ±fÄ±r kodla Fiori uygulamasÄ± oluÅŸturabilirsin.
	â€¢ CDS iÃ§inde yaptÄ±ÄŸÄ±n UI tanÄ±mlamalarÄ± doÄŸrudan uygulamaya yansÄ±r.

